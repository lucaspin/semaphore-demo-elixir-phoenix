version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: s1-brand-new-again
    os_image: ''
blocks:
  - name: 'Block #1'
    task:
      jobs:
        - name: Job 1
          commands:
            - echo hello
            - echo $((`date +%s` - SEMAPHORE_JOB_CREATION_TIME))
            - 'for i in {0..60}; do echo $i && sleep 1; done'
          parallelism: 2
      env_vars:
        - name: SEMAPHORE_AGENT_UPLOAD_JOB_LOGS
          value: when-trimmed
    dependencies: []
promotions:
  - name: Promotion 1
    pipeline_file: pipeline_2.yml
