version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: 'Block #1'
    task:
      jobs:
        - name: Job 1
          commands:
            - mkdir testing
            - echo "hello" > hello.txt
            - echo "hello 1" > testing/one.txt
            - echo "hello 2" > testing/two.txt
            - artifact push project hello.txt
            - artifact push project testing
            - artifact push workflow hello.txt
            - artifact push workflow testing
            - artifact push job hello.txt
            - artifact push job testing
            - rm hello.txt
            - rm -rf testing
            - artifact pull project hello.txt
            - artifact pull project testing
            - cat hello.txt
            - cat testing/one.txt
            - cat testing/two.txt
            - rm hello.txt
            - rm -rf testing
            - artifact pull workflow hello.txt
            - artifact pull workflow testing
            - cat hello.txt
            - cat testing/one.txt
            - cat testing/two.txt
            - rm hello.txt
            - rm -rf testing
            - artifact pull job hello.txt
            - artifact pull job testing
            - cat hello.txt
            - cat testing/one.txt
            - cat testing/two.txt
      env_vars:
        - name: SEMAPHORE_AGENT_UPLOAD_JOB_LOGS
          value: when-trimmed
    dependencies: []
promotions:
  - name: Promotion 1
    pipeline_file: pipeline_2.yml
